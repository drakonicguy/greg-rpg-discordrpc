[gd_scene load_steps=13 format=3 uid="uid://jiwivi764dxc"]

[ext_resource type="Script" path="res://scenes/mining/scr_mining_game.gd" id="1_0eiox"]
[ext_resource type="Texture2D" uid="uid://bulsofeyxd6am" path="res://sprites/mining/spr_tiles.png" id="2_3h1uj"]
[ext_resource type="Texture2D" uid="uid://ccdo56bo12oem" path="res://sprites/mining/spr_station_background.png" id="2_mm17a"]
[ext_resource type="PackedScene" uid="uid://ca56k2yykgyfs" path="res://scenes/characters/other/scn_greg_platformer.tscn" id="3_hjwtw"]
[ext_resource type="PackedScene" uid="uid://ekxwo70dmot1" path="res://scenes/tech/scn_camera.tscn" id="4_khxvi"]
[ext_resource type="Script" path="res://scenes/mining/scr_mining_component.gd" id="6_qjefl"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_0xn8s"]
texture = ExtResource("2_3h1uj")
texture_region_size = Vector2i(8, 8)
0:0/0 = 0
0:0/0/terrain_set = 0
0:0/0/terrain = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
1:0/0 = 0
1:0/0/terrain_set = 0
1:0/0/terrain = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
0:1/0 = 0
0:1/0/terrain_set = 0
0:1/0/terrain = 0
0:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:1/0/physics_layer_0/angular_velocity = 0.0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
1:1/0 = 0
1:1/0/terrain_set = 0
1:1/0/terrain = 0
1:1/0/probability = 0.25
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
2:0/0 = 0
2:0/0/terrain_set = 0
2:0/0/terrain = 1
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
2:0/0/terrains_peering_bit/bottom_side = 0

[sub_resource type="TileSet" id="TileSet_ivaes"]
tile_size = Vector2i(8, 8)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
terrain_set_0/mode = 0
terrain_set_0/terrain_0/name = "rock"
terrain_set_0/terrain_0/color = Color(0.552941, 0.529412, 0.505882, 1)
terrain_set_0/terrain_1/name = "tilefloor"
terrain_set_0/terrain_1/color = Color(0.431373, 0.529412, 0.807843, 1)
sources/0 = SubResource("TileSetAtlasSource_0xn8s")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_3ykqe"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_cgu8p"]
width = 160
height = 120
generate_mipmaps = false
normalize = false
noise = SubResource("FastNoiseLite_3ykqe")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1gpg1"]
content_margin_left = 1.0
content_margin_top = 1.0
content_margin_right = 1.0
content_margin_bottom = 1.0
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(1, 1, 1, 1)
corner_detail = 1
anti_aliasing = false

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1fnne"]
size = Vector2(8, 160)

[node name="MiningGame" type="Node2D"]
script = ExtResource("1_0eiox")

[node name="BgWall" type="Node2D" parent="."]
z_index = -2

[node name="TextureRect" type="NinePatchRect" parent="BgWall"]
modulate = Color(0.494118, 0.407843, 0.478431, 1)
offset_top = 112.0
offset_right = 160.0
offset_bottom = 404.0
texture = ExtResource("2_3h1uj")
region_rect = Rect2(0, 0, 16, 16)
patch_margin_top = 16
patch_margin_bottom = 16
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="Sprite2D2" type="Sprite2D" parent="BgWall"]
modulate = Color(0, 0, 0, 0.486275)
position = Vector2(2, 7)
texture = ExtResource("2_mm17a")
centered = false

[node name="Sprite2D" type="Sprite2D" parent="BgWall"]
position = Vector2(0, 5)
texture = ExtResource("2_mm17a")
centered = false

[node name="Tiles" type="TileMap" parent="."]
tile_set = SubResource("TileSet_ivaes")
cell_quadrant_size = 8
format = 2
layer_0/tile_data = PackedInt32Array(917504, 131072, 0, 917505, 131072, 0, 917506, 131072, 0, 917508, 131072, 0, 917507, 131072, 0, 917510, 131072, 0, 917509, 131072, 0, 917511, 131072, 0, 917513, 131072, 0, 917512, 131072, 0, 917514, 131072, 0, 917515, 131072, 0, 917516, 131072, 0, 917517, 131072, 0, 917518, 131072, 0, 917519, 131072, 0, 917520, 131072, 0, 917521, 131072, 0, 917522, 131072, 0, 917523, 131072, 0)

[node name="NoiseDisplay" type="Sprite2D" parent="."]
visible = false
texture = SubResource("NoiseTexture2D_cgu8p")
centered = false

[node name="GregPlatform" parent="." instance=ExtResource("3_hjwtw")]
position = Vector2(62, 97)

[node name="Camera" parent="GregPlatform" instance=ExtResource("4_khxvi")]
limit_left = 0
limit_right = 160
position_smoothing_enabled = true

[node name="MiningComponent" type="Node2D" parent="GregPlatform" node_paths=PackedStringArray("target", "display", "tilemap")]
top_level = true
script = ExtResource("6_qjefl")
target = NodePath("..")
display = NodePath("Panel")
tilemap = NodePath("../../Tiles")

[node name="Panel" type="Panel" parent="GregPlatform/MiningComponent"]
offset_right = 40.0
offset_bottom = 40.0
pivot_offset = Vector2(0, 8)
theme_override_styles/panel = SubResource("StyleBoxFlat_1gpg1")

[node name="Wall" type="StaticBody2D" parent="."]
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall"]
position = Vector2(-4, 0)
shape = SubResource("RectangleShape2D_1fnne")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Wall"]
position = Vector2(164, 0)
shape = SubResource("RectangleShape2D_1fnne")
